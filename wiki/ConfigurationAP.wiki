#labels Featured,Phase-Deploy,Phase-Implementation
=Как настроить точку доступа?=

==Внешний вид программы==

[http://savepic.org/2263603.png]

Вверху расположено меню приложения. Оно состоит из 3 элементов:

 * Файл 

 * Настройки

 * ? (Помощь)

В свою очередь меню "Файл" содержит элемент управление "Выйти". Горячая клавиша для вызова - Alt + F4. Событие по нажатию - закрыть приложение. 

Меню "Настройки" содержит элемент управления "Точка доступа". Горячая клавиша для вызова - Alt + С. Событие по нажатию - открывает окно настройки программы. На этом пункте мы остановимся по-подробней.

Меню "?" содержит элемент управления "О программе". Горячая клавиша для вызова - Alt + H. Событие по нажатию - открывает окно с информацией о лицензии, авторе и версии приложения. 

===Элементы управления основного окна ===

Сразу за меню следует строка состояния точки доступа. Заголовок поля состояния "Статус". Статус точки доступа обновляется в следующих случаях:

 * Запуск приложения
 * После активации точки доступа
 * После дезактивации точки доступа

===Алгоритм определения статуса точки доступа===

1. Интерфейс для точки доступа должен быть активирован. Это можно проверить, например, следующей командой:

{{{
ifconfig wlan0 | grep RUNNING
}}}

Ответ должен быть примерно таким:

{{{
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
}}}

Если ответ пуст, значит интерфейс дезактивирован.

2. *ip_forward* должен быть включён. Проверяется следующей командой:

{{{
cat  /proc/sys/net/ipv4/ip_forward
}}}

Ответы:

 * 1 - активирован

 * 0 - дезактивирован

3. Статус DHCP сервера:

{{{
/etc/init.d/isc-dhcp-server status | grep "not running"
}}}

Если ответ пуст, то DHCP сервер активирован, если же он содержит строчку "not running", он дезактивирован.

4. Статус Hostapd. Проверяется по тому же принципу, что и DHCP:

{{{
/etc/init.d/hostapd status | grep "not running"
}}}

Если ответ пуст, то Hostapd активирован, если же он содержит строчку "not running", он дезактивирован.

----

Далее следует 2 кнопки:

 * Активировать
 * Дезактивировать

Думаю, их назначение понятно - одна активирует точку доступа, вторая выполняет обратную процедуру. 

----

Поле "Клиент" содержит список клиентов, которые подключены к точки доступа в настоящий момент. Обновляется автоматически при активации точки доступа и в случае, если в настройках стоит автоматическое обновление списка клиентов. Об этом читайте далее.

----

Монитор трафика показывает входящий и исходящий трафик с интерфейса, который служит точкой доступа. 

==Окно "Настройки приложения"==

===Вкладка "Приложение"===

[http://savepic.org/2247220.png]

На этой вкладке настраиваются параметры интерфейса, и предоставляется доступ к некоторым функциям приложения. 

*Интервал обновления трафика* - устанавливает периодичность проверки входящего/исходящего трафика. По-умолчанию 5 секунд. Минимальный порог - 5 секунд.

*Авто обновление списка клиентов* - включает режим авто обновления списка клиентов. *Внимание! Может привести к зависаниям приложения из-за долгого ответа команды*

{{{
arp
}}}

*Интервал авто обновления списка* - устанавливает периодичность обновления списка клиентов.

*Не забывать пароль при выходе* - позволяет не сбрасывать пароль при выходе из приложения. По-умолчанию включено. Однако это может привести к проблеме безопасности, так как пароль хранится в открытом виде в одном из конфигурационных файлов. Для тех, кто боится, могут отключить эту функцию.

*Удалить старые бэкапы* - по нажатию выполняется поиск и удаление всех старых конфигурационных файлов в системе, которые приложение сохраняет при каждом обновлении конфигурации. 

*Сбросить пароль* - позволяет заново ввести пароль. В случае ошибки ввода пароля приложение закрывается и повторно запросит пароль при последующем запуске.

===Диалог запроса пароля===
[http://savepic.ru/3101382.png]

----
===Вкладка "Настройки Hostapd"===

[http://savepic.ru/3130073.png]

*IP сети* - устанавливает IP вашей точки доступа. *Должен оканчиваться на 1.* 

*Маска* - устанавливает маску сети.

*Интерфейс* - беспроводной интерфейс для вашей точки доступа.

*SSID* - имя точки доступа.

*Драйвер* - драйвер для вашего WiFi адаптера. По-умолчанию используется "nl80211".

*Каналы* - количество каналов.

*Код страны* - указывает для Hostapd, в какой страны вы находитесь. В зависимости с законодательством, могут накладываться ограничения по скорости, мощности сигнала или радиусе действия.

*Режим работы* - режим работы точки доступа. Тестировалось только под "g" режим. 

*Скрывать точку доступа* - если выбрать этот пункт, то точка доступа не будет видна при обчном сканировании. Клиент должен будет точно указать SSID, чтобы подключиться к вашей точке доступа.

*Защита* - включает шифрование. Доступен только 1 режим - WPA2-PSK. При выборе этого типа шифрования становится доступным поле ввода пароля.

*Пароль* - устанавливает ключ для шифрования. Есть ограничение по длине - не менее 8, но не более 16 символов. 

----
===Вкладка "Настройки DHCP"===

[http://savepic.org/2245172.png]

*Профиль сервера* - устанавливает пути до нужных конфигурационных файлов и программ. Возможны 2 варианта:

 * Debian/Ubuntu
 * RedHat/Fedora

Пункт "Другой" позволяет ввести свои пути. 

*Внимание! В пункте "Debian/Ubuntu" настройки производились для Ubuntu 11.04. В предыдущих версиях путь до DHCP сервера стоит указать в ручную.*

*DNS сервер* - устанавливает DNS сервер. По-умолчанию DNS сервера от Google.

*Диапазон IP для клиентов* - устанавливает диапазон адресов для клиентов. 

*Внешний интерфейс* - основной интерфейс, с которого будет осуществляться доступ в *Интернет*.

*Файл настройки DHCP* - устанавливает путь до файла настройки DHCP

*Файл настройки интерфейса* - устанавливает путь до файла, в котором указан внешний интерфейс. 

*Указатель интерфейса* - указатель внешнего интерфейса. В некоторых дистрибутивах может отличаться. 

*Команда запуска сервера DHCP* - команда для запуска DHCP - сервера. Может отличаться в некоторых дистрибутивах *и версиях*. Чтобы определить, какая команда у вас, выполните следующие действия:

1. Список имён, в названии которых есть DHCP
{{{
ls /etc/init,d/ | grep dhcp
}}}

2. Скопируйте полученное значение и впишите в строку в таком формате:
{{{
/etc/init.d/[Полученное значение]
}}}

В Ubuntu 10.10 и ниже должно получится что-то вроде:
{{{
/etc/init.d/dhcp3-server
}}}

----

==Получение отладочной информации==

В случае неудачной попытки активации точки доступа
[http://savepic.ru/3087065.png]

Вам будет предложено получить отладочную информацию. Она содержит точный список команд, которые были выполнены в последовательности активации и может содержать полезную информацию. Для получения в диалоге запроса нажмите "Да":

[http://savepic.org/2228791.png]

В появившемся диалоговом окне будет показана вся необходимая информация:

[http://savepic.ru/3142360.png]

----

==Литература и ссылки==

 * Официальная WiKi Ubuntu.ru - [http://help.ubuntu.ru/wiki/wifi_ap]

 * [http://howtolinux.ru/2010/05/01/hostapd-%D0%B8%D0%BB%D0%B8-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%B0%D1%8F-%D1%82%D0%BE%D1%87%D0%BA%D0%B0-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0/]